<!DOCTYPE html>
<html lang="en">
<head>
  <div class="box">
    <div class="left_con">
      <div class="box_text">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.结尾处
      </div>
    </div>
    <div class="right_con">
      <div class="box_scroll">        
        <script type="text/javascript">
          let boxText = document.querySelector('.box_text')
          let leftCon = document.querySelector('.left_con')
          let rightCon = document.querySelector('.right_con')
          let boxScroll = document.querySelector('.box_scroll')
          let textH = boxText.scrollHeight
          let leftH = leftCon.offsetHeight
          let rightH = rightCon.offsetHeight

          boxScroll.style.height = parseInt(leftH/textH*rightH) + 'px'
          let bool = false
          let startY
            boxSroll.onmousedown = function(e){
              e = window.event || e
              bool = True
              startY = e.pageY
            }
          document.onmousemove = functino(e){
            if (!bool){
              return
            }
            boxScroll.style.top = e.pageT - startY + 'px'
          }
          let barY
          barY = e.pageY - startY
            if(barY<0){
              barY = 0
            }else if(barY>rightH-boxScroll.clientHeight){
              barY = rightH-boxScroll.clientHeight
            }
            boxScroll.style.top = barY + 'px'
            boxText.style.top = -barY*(rightH/boxScroll.clientHeight) + 'px'
          let endY = 0
          document.onmouseup = function(e){
            bool = false
            endY = boxScroll.offsetTop
          }
          window.getSelection ? window..getSelection().removeAllRanges() : document.selection.empty()
        </script>
      </div>
    </div>
  </div>
</head>
<body>
</body>
<style>
  .box{
    width: 300px;
    height: 500px;
    border: 1px solid hotpink;
  }
  .left_con{
    height: 500px;
    width: 270px;
    float: left;
    overflow: hidden;
  }
  .right_con{
    height: 500px;
    width: 30px;
    background: #ccc;
    float: right;
    cursor: pointer;
    position: relative;
  }
  .box_scroll{
    width: 30px;
    background: burlywood;
    border-radius: 15px;
    position: absolute;
    left: 0;
  }
</style>